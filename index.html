<html>
	<head>
		<meta charset="utf-8">
		<title>Character Manager</title>

		<link rel="stylesheet" href="css/style.css">
		<link rel="stylesheet" href="rpg-font/css/rpg-awesome.css">
	</head>
	<body>
		<table>
			<tr>
				<!-- menu -->
				<td colspan="2" class='menu-cell'><div id="character-new" class="button" onclick="openNewCharWarning()">New Character</div><div id="character-import" class="button">Import Character</div><div id="character-export" class="button">Save Character</div><div class="button" onclick="openItemImport()">Import code</div><div class="button" onclick="openRename()">Rename</div></td>
			</tr>
			<tr>
				<!-- Name -->
				<td class='name-cell' colspan="2"><div><span id='firstname-l'></span><span id='nickname-l'></span><span id='lastname-l'></span></div></td>
			</tr>
				<!-- Equipment -->
			<tr><td colspan="2">
				<div class='equipment-cell'>
					<div><div class='ec-header'>Armor</div><div id='armor-container'></div></div>
					<div><div class='ec-header'>Main hand</div><div id='mainhand-container'></div></div>
					<div><div class='ec-header'>Off hand</div><div id='offhand-container'></div></div>
				</div>
			</td></tr>
				<td id="left-pane">
					<!-- Exp -->
					<div id="exp-wrapper">
						<table>
							<tr><td><span id="exp-label" class="stat-label">?</span>XP</td><td><div class="button" onclick="openXPSelector()">+</div><div id="levelup-b" class="button" onclick="openLevelUp()">Level Up</div></td></tr>
						</table>
					</div>
					<!-- Wounds -->
					<table id="wound-table">
						<tr>
							<td class="wound-minus wound-button" onclick="pluswound()">-</td>
							<td class="wound-container"><span id="wound"></span><span id="wound-label"> / <span id="wound-max"></span></span></td>
							<td class="wound-plus wound-button" onclick="minuswound()">+</td>
						</tr>
					</table>
					<!-- Derived Attributes -->
					<div id="derived-attributes">
						<table>
							<tr><td colspan="2" class="stat-title">Derived Attributes</td></tr>
							<tr class='a-row' title="The <b>distance</b> the character can jog to in one turn.">
								<td>Pace</td>
								<td class="stat-label"><span id="pace-l"></span><span id="pace-modifier-l"></span></td>
							</tr>
							<tr class='a-row' title="The number a <b>melee opponent</b> has to beat <b>to hit</b> this character.">
								<td>Parry</td>
								<td class="stat-label"><span id="parry-l"></span><span id="parry-modifier-l"></span></td>
							</tr>
							<tr class='a-row' title="The number a <b>ranged opponent</b> has to beat <b>to hit</b> this character.">
								<td>Dodge</td>
								<td class="stat-label"><span id="dodge-l"></span><span id="dodge-modifier-l"></span></td>
							</tr>
							<tr class='a-row' title="The character can subtract this number from incoming damage.">
								<td>Toughness</td>
								<td class="stat-label"><span id="toughness-l"></span><span id="toughness-modifier-l"></span></td>
							</tr>
							<tr class='a-row' title="Charisma affects <b>npc behavior</b> towards this character.">
								<td>Charisma</td>
								<td class="stat-label"><span id="charisma-l"></span><span id="charisma-modifier-l"></span></td>
							</tr>
						</table>
					</div>
					<!-- Attribute Panel -->
					<div id="attributes">
						<table>
							<tr><td colspan="2" class="stat-title">Main Attributes<span id="attribute-points-l"></span></td></tr>
							<tr id="attribute-brow" class="brow"><td colspan="2"><div class="button" onclick="openAttributeSelector()">Increase</div></td></tr>
						</table>
					</div>
					<!-- Skill Panel -->
					<div id="skills">
						<table>
							<tr><td colspan="2" class="stat-title">Skills<span id="skill-points-l"></span></td></tr>
							<tr id="skill-brow" class="brow"><td colspan="2"><div class="button" onclick="openSkillSelector()">Learn</div></td></tr>
						</table>
					</div>
				</td>
				<td id='character-rightpane'>
					<!-- Hindrances -->
					<div id="hindrance-wrapper">
						<table>
							<tr id="hindrance-null"><td><div class="hecell">No Hindrances</div></td></tr>
							<tr id="hindrance-brow" class="brow"><td><div id="hindrance-add-b" class="button" onclick="openHindranceSelector()">Add</div><div id="hindrance-bonus-b" class="button" onclick="openBonusSelector()">Bonus</div></td></tr>
						</table>
					</div>
					<!-- Hindrances -->
					<div id="edge-wrapper">
						<table>
							<tr id="edge-null"><td><div class="hecell">No Edges</div></td></tr>
							<tr id="edge-brow" class="brow"><td><div id="edge-add-b" class="button" onclick="openEdgeSelector()">Add</div></td></tr>
						</table>
					</div>
				</td>
			</tr>
			<tr>
				<td colspan="2" id='inv-tabs-wrapper'><div class="inv-tab" onclick="openInventory()">Inventory</div><div class="inv-tab" onclick="openCrafting()">Crafting</div></td>
			</tr>
			<!-- Inventory -->
			<tr class="inv" id="inventory-stackable-wrapper">
				<td colspan="2">
					<div class='inv-cat'>Stackables</div>
					<table id="inventory-stackable">
					</table>
				</td>
			</tr>
			<tr class="inv" id="inventory-weapon-wrapper">
				<td colspan="2">
					<div class='inv-cat'>Weapons</div>
					<table id="inventory-weapon">
					</table>
				</td>
			</tr>
			<tr class="inv" id="inventory-armor-wrapper">
				<td colspan="2">
					<div class='inv-cat'>Armors</div>
					<table id="inventory-armor">
					</table>
				</td>
			</tr>
			<tr class="inv" id="inventory-others-wrapper">
				<td colspan="2">
					<div class='inv-cat'>Mods</div>
					<table id="inventory-other">
					</table>
				</td>
			</tr>
			<!-- Crafting -->
			<tr class="craft">
				<td colspan="2">
					<div class='inv-cat'>Tinkering</div>
					<table id="crafting-recipes-tinkering">
					</table>
				</td>
			</tr>
			<tr class="craft">
					<td colspan="2">
						<div class='inv-cat'>Healing</div>
						<table id="crafting-recipes-healing">
						</table>
					</td>
				</tr>
		</table>

		<div id="popup" class="hidden">
			<!-- Attribute Selector -->
			<div id="attribute-selector" class="hidden">
				<table>
					<tr><td class="selector-title" colspan=3>Attribute Points: <span id="attribute-selector-available"></span></td></tr>
					<tr id="attribute-selector-brow"><td colspan=3><div class="button" onclick="closeAttributeSelector()">Cancel</div><div class="button" onclick="attributeSelectorReset()">Reset</div><div id="attribute-selector-confirm-b" class="button">Confirm</div></td></tr>
				</table>
			</div>

			<!-- Skill Selector -->
			<div id="skill-selector" class="hidden">
				<table>
					<tr><td class="selector-title" colspan=4>Skill Points: <span id="skill-selector-available"></span></td></tr>
					<tr class='selector-header-row'>
						<td>Skill</td>
						<td>Progress</td>
						<td>Cost</td>
					</tr>
					<tr id="skill-selector-brow"><td colspan=4><div class="button" onclick="closeSkillSelector()">Cancel</div><div class="button" onclick="skillSelectorReset()">Reset</div><div id="skill-selector-confirm-b"class="button">Confirm</div></td></tr>
				</table>
			</div>

			<!-- Level Up -->
			<div id="level-up" class="hidden">
				<div>
					<div colspan=3 class='he-header'>Choose an option to level up</div>
					<div class="button choice" onclick="edgeAdvance()">Gain 1<br>edge point</div><div class="button choice" onclick="skillAdvance()">Gain 2<br>skill points</div><div class="button choice" onclick="attributeAdvance()">Gain 1<br>attribute point</div>
					<div class='selector-brow'>
						<div class="button" onclick="closeLevelUp()">Cancel</div>
					</div>
				</div>
			</div>

			<!-- XP selector -->
			<div id="xp-selector" class="hidden">
				<table>
					<tr>
						<td><input id="xp-input" placeholder="Click Me" type="number"></td>
						<td>XP</td>
					</tr>
					<tr><td colspan=2 class='brow'><div class="button" onclick="closeXPSelector()">Cancel</div><div class="button" onclick="addXPSelector()">Add</div></td></tr>
				</table>
			</div>

			<!-- Hindrance Selector -->
			<div id="hindrance-selector" class="hidden">
				<div id="hindrance-selector-step1" class="hidden">
					<div class='he-header'>You can take as many hindrances as you want but you receive at best 4 bonus points from them.</div>
					<div class='he-header'><span class='important-var'><span id="hindrance-pt-l"></span>/4</span> Bonus points.</div>
					<div id="hindrance-select-wrapper"><div class='select-table' id="hindrance-select">
						<div class='table-header'><div>Hindrance <span class='header-sublabel'>Bonus</span></Bonus></div><div>Description</div></div>
					</div></div>
					<div class='selector-brow'><div class="button" onclick="closeHindranceSelector()">Cancel</div></div>
				</div>
				<div id="hindrance-selector-step2" class="hidden">
					<div>Hindrances are permanent. Are you sure you want to add <span class='important-var' id="hindrance-selector-l"></span> to your character?</div>
					<div class='selector-brow'><div class="button" onclick="closeHindranceSelector()">Cancel</div><div id="hindrance-selector-add-b" class="button">Add</div></div>
				</div>
			</div>

			<!-- Bonus  Selector -->
			<div id="bonus-selector" class="hidden">
				<table>
					<tr><td colspan=3 class='bonus-header'>Choose a bonus. <span id="hindrance-bonus-l"></span> points available.</span></td></tr>
					<tr>
						<td><div class="button choice" onclick="skillBonus()">a skill point</div></td>
						<td><div class="button choice" onclick="edgeBonus()">an edge point</div></td>
						<td><div class="button choice" onclick="attributeBonus()">an attribute point</div></td>
					</tr>
					<tr class='bonus-cost'><td>for 1pt</td><td>for 2pts</td><td>for 2pts</td></tr>
					<tr><td colspan=3 class='bonus-brow'><div class="button" onclick="closeBonusSelector()">Cancel</div></td></tr>
				</table>
			</div>

			<!-- edges selector -->
			<div id="edge-selector" class="hidden">
				<div id="edge-selector-step1">
					<div class='he-header'>You can still take <span id="edge-points-l"></span> edge(s).</div>
					<div id="edge-selector-wrapper">
						<div id="edge-table">
							<div class='table-header'>
								<div>Name</div>
								<div>Lvl</div>
								<div>Requirements</div>
								<div>Effect</div>
							</div>
						</div>
					</div>
					<div class='selector-brow'><div class="button" onclick="closeEdgeSelector()">Cancel</div></div>
				</div>
				<div id="edge-selector-step2">
					<div>Edges are permanent. Are you sure you want to add <span class='important-var' id="edge-selector-l"></span> to your character?</div>
					<div class='selector-brow'><div class="button" onclick="closeEdgeSelector()">Cancel</div><div id="edge-selector-add-b" class="button">Add</div></div>
				</div>
			</div>

			<!-- code importer -->
			<div id="item-importer" class="hidden">
				<div>
					<div class='he-header'>Paste a code here</div>
					<div><input id="importer-input" type="text" placeholder="Paste here"></div>
					<div class='selector-brow'><div class="button" onclick="closeItemImport()">Cancel</div><div class="button" onclick="importItem()">Add</div></div>
				</div>
			</div>

			<!-- crafting window -->
			<div id="crafting-window" class="hidden">
				<table>
					<tr><td class='craft-header' colspan="2">Do you want to craft <span id="crafting-name-l" class='important-var'></span>?</td></tr>
					<tr><th class='craft-th'>Materials</th><th class='craft-th'>Output</th></tr>
					<tr><td class='craft-td' id="crafting-input"></td><td class='craft-td' id="crafting-output"></td></tr>
					<tr><td colspan="2"><div class='selector-brow'><div class="button" onclick="closeCraftingWindow()">Cancel</div><div id="crafting-confirm-b" class="button">Craft</div></div></td></tr>
				</table>
			</div>

			<!-- item send -->
			<div id="item-send" class="hidden">
				<div id="item-send-step1">
					<div class='he-header'>Give <span id="send-item-l" class='important-var'>item</span> away?</div>
					<div><input id="item-send-input" type="range" step="1"></div>
					<div class='selector-brow'><div class="button" onclick="closeSendWindow()">Cancel</div><div id="item-send-confirm" class="button" onclick="sendWindowStep2()">Give</div></div>
				</div>
				<div id="item-send-step2">
					<div class='he-header'>Send the following code.</div>
					<div id="item-send-code"></div>
					<div class='selector-brow'><div class="button" onclick="closeSendWindow()">Close</div><div class="button cpy" data-clipboard-target="#item-send-code">Copy</div></div>
				</div>
			</div>

			<!-- trash window -->
			<div id="trash" class="hidden">
				<div>
					<div>Do you want to remove <span id='trash-l'></span></div>
					<div><div class="button" onclick="closeTrashWindow()">Cancel</div><div class="button" id='trash-confirm'>Trash</div></div>
				</div>
			</div>

			<!-- mod window -->
			<div id="mod-window" class="hidden">
				<div>
					<div class='he-header'>Choose a piece of equipment on which to apply <span id="mod-l" class='important-var'>mod</span></div>
					<table id="mod-item-list">
						<tr class='mod-header'><th>Equipment</th><th>Mods</th></tr>
					</table>
					<div class='selector-brow'><div class="button" onclick="closeModWindow()">Cancel</div></div>
				</div>
			</div>

			<!-- Details Window -->
			<div id="item-details" class="hidden">
				<div>
					<div id='item-details-wrapper'></div>
					<div class='brow'><div class="button" onclick="closeItemDetails()">Cancel</div></div>
				</div>
			</div>

			<!-- Rename Window -->
			<div id="rename-window" class="hidden">
				<div>
					<div class='he-header'>Rename your character.<br>You do not have to use every field.</div>
					<div class='rename-input-row'><input id='firstname-i'> "<input id='nickname-i'>" <input id='lastname-i'></div>
					<div class='selector-brow'><div class="button" onclick="closeRename()">Cancel</div><div class="button" onclick="confirmRename()">Rename</div></div>
				</div>
			</div>

			<!-- New Char Warning -->
			<div id="new-char-warning" class="hidden">
					<div>
						<div class='he-header'>Everything since the last save will be lost. Do you want to create a new character?</div>
						<div class='selector-brow'><div class="button" onclick="closeNewCharWarning()">Cancel</div><div class="button" onclick="newCharacter()">New Character</div></div>
					</div>
				</div>

		<!-- Insert this line above script imports  -->
		<script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>

		<!-- normal script imports etc  -->
		<script src="tippy.all.min.js"></script>
		<script src="jquery.min.js"></script> 
		<script src="clipboard.min.js"></script>
		<script src="js/data.js"></script>
		<script src="js/edges.js"></script>
		<script src="js/main.js"></script>
		<script src="js/mods.js"></script>
		<script src="js/items.js"></script>  
		<script src='js/fs.js'></script>   

		<!-- Insert this line after script imports -->
		<script>
		if (window.module) module = window.module;
		update();
		updateInventory();
		</script>
		
	</body>
</html>
